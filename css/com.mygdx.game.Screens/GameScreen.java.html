<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GameScreen.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">tests</a> &gt; <a href="index.source.html" class="el_package">com.mygdx.game.Screens</a> &gt; <span class="el_source">GameScreen.java</span></div><h1>GameScreen.java</h1><pre class="source lang-java linenums">package com.mygdx.game.Screens;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Input;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.audio.Music;
import com.badlogic.gdx.files.FileHandle;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.Cursor.SystemCursor;
import com.badlogic.gdx.graphics.GL20;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Pixmap;
import com.badlogic.gdx.graphics.Pixmap.Format;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.*;
import com.badlogic.gdx.maps.tiled.TiledMap;
import com.badlogic.gdx.maps.tiled.TmxMapLoader;
import com.badlogic.gdx.maps.tiled.renderers.OrthogonalTiledMapRenderer;
import com.badlogic.gdx.math.MathUtils;
import com.badlogic.gdx.scenes.scene2d.Actor;
import com.badlogic.gdx.scenes.scene2d.InputEvent;
import com.badlogic.gdx.scenes.scene2d.Stage;
import com.badlogic.gdx.scenes.scene2d.ui.ImageButton;
import com.badlogic.gdx.scenes.scene2d.ui.ProgressBar;
import com.badlogic.gdx.scenes.scene2d.ui.ProgressBar.ProgressBarStyle;
import com.badlogic.gdx.scenes.scene2d.ui.Skin;
import com.badlogic.gdx.scenes.scene2d.utils.ClickListener;
import com.badlogic.gdx.scenes.scene2d.utils.TextureRegionDrawable;
import com.badlogic.gdx.utils.Array;
import com.badlogic.gdx.utils.ScreenUtils;
import com.badlogic.gdx.utils.viewport.FitViewport;
import com.mygdx.game.*;
import com.mygdx.game.Clickables.*;
import com.mygdx.game.Helpers.*;

import com.mygdx.game.Food.Burger;
import com.mygdx.game.Food.Ingredient;
import com.mygdx.game.Food.Order;
import com.mygdx.game.Food.Salad;
import com.mygdx.game.Clickables.UnlockBaking;
import com.mygdx.game.Powerups.Powerups;
import org.json.JSONArray;
import org.json.JSONObject;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.time.Duration;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Random;

public class GameScreen implements Screen {

<span class="fc" id="L56">    private int customerNumber = 5;</span>
    PiazzaPanic game;
    FitViewport view;
    Stage gameStage;
    Money money;
    Powerups powerups;
    // map and camera stuff
    TmxMapLoader mapLoader;
    TiledMap map;
    OrthogonalTiledMapRenderer renderer;
    OrthographicCamera gameCam;
    // Start the game with 3 reputation points
<span class="fc" id="L68">    int Rep = 3;</span>
<span class="fc" id="L69">    Texture RepLabel = new Texture(&quot;REP.png&quot;);</span>
<span class="fc" id="L70">    Texture RepPoint = new Texture(&quot;REPHeart.png&quot;);</span>
    // customer number determines how many customers will spawn over the course of
    // the game
    // 0 means infinite
    private final Array&lt;Cook&gt; cooks;
    private final ArrayList&lt;ArrayList&lt;Customer&gt;&gt; customers;
    // sprite handling
<span class="fc" id="L77">    public float[][] locations = {{0, 64}, {32, 64}, {64, 64}, {0, 32}, {48, 28}, {80, 48}, {100000, -1}};</span>
    Sprite alex;
    Sprite amelia;
    Sprite adam;
    FileHandle charIdles;
    Skin skin;
    Skin custSkins;
<span class="fc" id="L84">    ArrayList&lt;Sprite&gt; idles = new ArrayList&lt;&gt;();</span>
    // cook and customer control variables
<span class="fc" id="L86">    int selected = 0;</span>
<span class="fc" id="L87">    ArrayList&lt;Integer&gt; stationSelected = new ArrayList&lt;&gt;();</span>
    // control the number of cooks
<span class="fc" id="L89">    int cookCount = 3; // control how many cooks spawn -&gt; update to allow for the value to increase</span>
    // take the time at the start of the game to display the time taken to complete
    // the round

<span class="fc" id="L93">    long gameTime = System.currentTimeMillis();</span>

    // list of active orders
<span class="fc" id="L96">    ArrayList&lt;Order&gt; orders = new ArrayList&lt;&gt;();</span>
    // used to count how much time has passed after an order is placed
<span class="fc" id="L98">    float timeCount = 0;</span>
    // order timer font
<span class="fc" id="L100">    BitmapFont font = new BitmapFont();</span>
    // progress bars
    HashMap&lt;ProgressBar, Cook&gt; bars;
    // music
<span class="fc" id="L104">    Music alienJazz = Gdx.audio.newMusic(Gdx.files.internal(&quot;Alien_Jazz_Ridley_Coyte.mp3&quot;));</span>
    // stations
    ImageButton pantryClickable;
    ImageButton fryingClickable;
<span class="fc" id="L108">    int fryingClicked = 0;</span>
<span class="fc" id="L109">    int bakingClicked = 0;</span>
<span class="fc" id="L110">    boolean pattyAtFrying = false;</span>
<span class="fc" id="L111">    boolean pizzaAtBaking = false;</span>
<span class="fc" id="L112">    boolean bakingUnlocked = false;</span>
<span class="fc" id="L113">    boolean potatoAtBaking = false;</span>
<span class="fc" id="L114">    Texture flipBtn = new Texture(&quot;flipBtn.png&quot;);</span>
    ImageButton bakingClickable;
    ImageButton cuttingClickable;
    ImageButton binClickable;
    ImageButton servingClickable;
    ImageButton extraTimeClickable;
    // pantry and serving screen frames
    ImageButton extraChefClickable;
    TextureRegion pantryScreenFrameRegion;
    ImageButton pantryScreenFrame;
    TextureRegion servingScreenFrameRegion;
    ImageButton servingScreenFrame;
    // clickables
    ImageButton XbtnClickable;
    ImageButton lettuceClickable;
    ImageButton tomatoClickable;
    ImageButton bunsClickable;
    ImageButton pattyClickable;
    ImageButton burgerClickable;
    ImageButton saladClickable;
    ImageButton speedClickable;
    ImageButton repClickable;
    ImageButton saveClickable;
    ImageButton pizzaClickable;
    ImageButton unlockBakingClickable;
    ImageButton potatoClickable;
    ImageButton stationSpeedClickable;
    ImageButton cheeseClickable;
    ImageButton pizzaServableClickable;
    ImageButton potatoServeClickable;
    Helpers helpers;

    ImageButton doubleMoneyClickable;
<span class="fc" id="L147">    int NumServed = 0;</span>

    // when you hover over a clickable it changes the cursor to a hand
    // this listener is added to all clickables
<span class="fc" id="L151">    ClickListener cursorHovering = new ClickListener() {</span>
        @Override
        public void enter(InputEvent event, float x, float y, int pointer, Actor fromActor) {
<span class="nc" id="L154">            Gdx.graphics.setSystemCursor(SystemCursor.Hand);</span>
<span class="nc" id="L155">        }</span>

        @Override
        public void exit(InputEvent event, float x, float y, int pointer, Actor toActor) {
<span class="nc" id="L159">            Gdx.graphics.setSystemCursor(SystemCursor.Arrow);</span>
<span class="nc" id="L160">        }</span>
    };
    // UI elements
<span class="fc" id="L163">    Texture plateTex = new Texture(&quot;plate.png&quot;);</span>
<span class="fc" id="L164">    Texture cookStackTitle = new Texture(&quot;cookStackTitle.png&quot;);</span>
<span class="fc" id="L165">    Texture selectedCook = new Texture(&quot;selected.png&quot;);</span>
    // Order Textures
<span class="fc" id="L167">    Texture burgerOrderTexture = new Texture(&quot;orderBurger.png&quot;);</span>
<span class="fc" id="L168">    Texture saladOrderTexture = new Texture(&quot;orderSalad.png&quot;);</span>
<span class="fc" id="L169">    Boolean showPantryScreen = false;</span>
<span class="fc" id="L170">    Boolean showServingScreen = false;</span>

    Utils utils;
    Frying frying;
    Bin bin;
    Pantry pantry;
    Baking baking;
    Cutting cutting;
    Serving serving;
    SaladClickable saladC;
    BurgerClickable burger;
    LettuceClickable lettuce;
    PotatoClickable potato;
    TomatoClickable tomato;
    BunClickable bun;
    PattyClickable patty;
    Savegame save;
    PizzaClickable pizza;
    UnlockBaking unlock;
    PizzaServeClickable pizzaServe;
    PotatoServeClickable potatoServe;
    SpeedPowerup speedPowerup;

    RepPowerup repPowerup;
    ExtratimePowerup extratimePowerup;
    ExtraChef extraChefPowerup;

    DoubleMoneyPowerup doubleMoneyPowerup;
<span class="fc" id="L198">    Random rand = new Random();</span>

    StationSpeedPowerup stationSpeedPowerup;

<span class="fc" id="L202">    private int customerCount = 0;</span>

<span class="fc" id="L204">    private Boolean endless = false;</span>
    JSONObject obj;
    JSONObject config;
<span class="fc" id="L207">    private HashMap&lt;ProgressBar, Float&gt; pattyTimers = new HashMap&lt;&gt;();</span>
<span class="fc" id="L208">    private float pattyFryingTime = 0;</span>
<span class="fc" id="L209">    private float potatoBakingTime = 0;</span>
<span class="fc" id="L210">    private float pizzaBakingTime = 0;</span>

<span class="fc" id="L212">    boolean isInitialMove = true;</span>
<span class="fc" id="L213">    boolean thirdChefUnlocked = false;</span>
    /*
        * Constructor for the game screen
        *
        * @param game the game object
        * @param port the viewport
        * @param isEndless whether the game is endless or not
        * @param isLoad whether the game is being loaded or not
        * @param Loadfile the file to load from
        * @param config the config file
        * @throws IOException
        *
        * @return none
     */
    public GameScreen(PiazzaPanic game, FitViewport port, Boolean isEndless, Boolean isLoad, String Loadfile,
<span class="fc" id="L228">            JSONObject config, OrthogonalTiledMapRenderer rendererOptional) throws IOException {</span>

        // initialise the game
<span class="fc" id="L231">        this.game = game;</span>
<span class="fc" id="L232">        this.view = port;</span>
<span class="fc" id="L233">        this.config = config;</span>
<span class="fc" id="L234">        this.customerNumber = config.getInt(&quot;customersToServe&quot;);</span>
<span class="fc" id="L235">        this.helpers = new Helpers(game);</span>

<span class="fc" id="L237">        this.utils = new Utils();</span>
<span class="fc" id="L238">        this.frying = new Frying(game, utils, this);</span>
<span class="fc" id="L239">        this.bin = new Bin(game, utils, this);</span>
<span class="fc" id="L240">        this.pantry = new Pantry(game, utils, this);</span>
<span class="fc" id="L241">        this.baking = new Baking(game, utils, this);</span>
<span class="fc" id="L242">        this.cutting = new Cutting(game, utils, this);</span>
<span class="fc" id="L243">        this.serving = new Serving(game, utils, this);</span>
<span class="fc" id="L244">        this.saladC = new SaladClickable(game, utils, this);</span>
<span class="fc" id="L245">        this.burger = new BurgerClickable(game, utils, this);</span>
<span class="fc" id="L246">        this.bun = new BunClickable(utils, this);</span>
<span class="fc" id="L247">        this.lettuce = new LettuceClickable(utils, this);</span>
<span class="fc" id="L248">        this.tomato = new TomatoClickable(utils, this);</span>
<span class="fc" id="L249">        this.patty = new PattyClickable(utils, this);</span>
<span class="fc" id="L250">        this.pizza = new PizzaClickable(utils, this);</span>
<span class="fc" id="L251">        this.potato = new PotatoClickable(utils, this);</span>
<span class="fc" id="L252">        this.unlock = new UnlockBaking(utils, this);</span>
<span class="fc" id="L253">        this.pizzaServe = new PizzaServeClickable(game, utils, this);</span>
<span class="fc" id="L254">        this.potatoServe = new PotatoServeClickable(game, utils, this);</span>
        try {
<span class="fc" id="L256">            this.save = new Savegame(game, utils, this);</span>
<span class="nc" id="L257">        } catch (IOException e) {</span>
<span class="nc" id="L258">            throw new RuntimeException(e);</span>
<span class="fc" id="L259">        }</span>
<span class="fc" id="L260">        money = new Money(game, config.getString(&quot;difficulty&quot;));</span>

<span class="fc" id="L262">        powerups = new Powerups(game, money, this, config.getString(&quot;difficulty&quot;));</span>
<span class="fc" id="L263">        this.speedPowerup = new SpeedPowerup(utils, this, powerups);</span>
<span class="fc" id="L264">        this.repPowerup = new RepPowerup(utils, this, powerups);</span>
<span class="fc" id="L265">        this.stationSpeedPowerup = new StationSpeedPowerup(utils, this, powerups);</span>
<span class="fc" id="L266">        this.extratimePowerup = new ExtratimePowerup(utils, this, powerups);</span>
<span class="fc" id="L267">        this.extraChefPowerup = new ExtraChef(utils, this, powerups);</span>
<span class="fc" id="L268">        this.doubleMoneyPowerup = new DoubleMoneyPowerup(utils, this, powerups);</span>


<span class="fc" id="L271">        gameStage = new Stage(view, game.batch);</span>

        // load the map and camera
<span class="fc" id="L274">        mapLoader = new TmxMapLoader();</span>
<span class="fc" id="L275">        map = mapLoader.load(&quot;KitchenMap.tmx&quot;);</span>
<span class="pc bpc" id="L276" title="1 of 2 branches missed.">        if (rendererOptional == null) {</span>
<span class="nc" id="L277">            renderer = new OrthogonalTiledMapRenderer(map);</span>
        } else {
<span class="fc" id="L279">            renderer = rendererOptional;</span>
<span class="fc" id="L280">            renderer.setMap(map);</span>
        }
<span class="fc" id="L282">        gameCam = new OrthographicCamera();</span>
<span class="fc" id="L283">        view.setCamera(gameCam);</span>
<span class="fc" id="L284">        view.setWorldSize(192, 144);</span>
<span class="fc" id="L285">        gameCam.position.set(view.getWorldWidth() / 2, view.getWorldHeight() / 2, 0);</span>
        // set order timer font color
<span class="fc" id="L287">        font.setColor(Color.BLACK);</span>
<span class="fc" id="L288">        font.getData().setScale(0.5f);</span>
        // sprite information from the texture atlas
<span class="fc" id="L290">        TextureAtlas atlasIdle = new TextureAtlas(Gdx.files.internal(&quot;charIdle.txt&quot;));</span>
<span class="fc" id="L291">        TextureAtlas customersLeft = new TextureAtlas(Gdx.files.internal(&quot;customersLeft.txt&quot;));</span>
<span class="fc" id="L292">        skin = new Skin();</span>
<span class="fc" id="L293">        skin.addRegions(atlasIdle);</span>
<span class="fc" id="L294">        custSkins = new Skin();</span>
<span class="fc" id="L295">        custSkins.addRegions(customersLeft);</span>
<span class="fc" id="L296">        charIdles = Gdx.files.internal(&quot;charIdle.txt&quot;);</span>
<span class="fc" id="L297">        adam = skin.getSprite(&quot;Adam&quot;);</span>
<span class="fc" id="L298">        alex = skin.getSprite(&quot;Alex&quot;);</span>
<span class="fc" id="L299">        amelia = skin.getSprite(&quot;Amelia&quot;);</span>
<span class="fc" id="L300">        idles.add(adam);</span>
<span class="fc" id="L301">        idles.add(alex);</span>
<span class="fc" id="L302">        idles.add(amelia);</span>

        // music control
        // music composed by Ridley Coyte
<span class="pc bpc" id="L306" title="1 of 2 branches missed.">        if (!config.getBoolean(&quot;muteMusic&quot;)) {</span>
<span class="fc" id="L307">            alienJazz.setLooping(true);</span>
<span class="fc" id="L308">            alienJazz.play();</span>
        }

        // create the instances of the cooks and first customer.
<span class="fc" id="L312">        cooks = new Array&lt;Cook&gt;();</span>
<span class="fc" id="L313">        spawnCooks();</span>
<span class="fc" id="L314">        customers = new ArrayList&lt;ArrayList&lt;Customer&gt;&gt;();</span>
<span class="fc" id="L315">        ArrayList&lt;Customer&gt; tmp = new ArrayList&lt;Customer&gt;();</span>
<span class="fc" id="L316">        int tmpI = helpers.CustomersToServe(customerCount);</span>


<span class="fc bfc" id="L319" title="All 2 branches covered.">        for (int i = 0; i &lt; tmpI; i++) {</span>
<span class="fc" id="L320">            tmp.add(new Customer(new Actor(), bakingUnlocked));</span>
        }
<span class="fc" id="L322">        System.out.print(tmp);</span>
<span class="fc" id="L323">        customers.add(tmp);</span>
<span class="fc" id="L324">        increaseNumServed(tmpI);</span>
        // array of all progressbars created (used to update all of them in
        // updateProgressBars function)
<span class="fc" id="L327">        bars = new HashMap&lt;ProgressBar, Cook&gt;();</span>
        // pantry station
<span class="fc" id="L329">        pantryClickable = pantry.getPantryClickable();</span>
<span class="fc" id="L330">        gameStage.addActor(pantryClickable);</span>
        // frying station
<span class="fc" id="L332">        fryingClickable = frying.createFryingClickable();</span>
<span class="fc" id="L333">        gameStage.addActor(fryingClickable);</span>
        // baking station
<span class="fc" id="L335">        bakingClickable = baking.getBakingClickable();</span>
<span class="fc" id="L336">        gameStage.addActor(bakingClickable);</span>
        // bin station
<span class="fc" id="L338">        binClickable = bin.getBinClickable();</span>
<span class="fc" id="L339">        gameStage.addActor(binClickable);</span>
        // cutting station
<span class="fc" id="L341">        cuttingClickable = cutting.getCuttingClickable();</span>
<span class="fc" id="L342">        gameStage.addActor(cuttingClickable);</span>
        // serving station
<span class="fc" id="L344">        servingClickable = serving.getServingClickable();</span>
<span class="fc" id="L345">        gameStage.addActor(servingClickable);</span>
        // save game
<span class="fc" id="L347">        saveClickable = save.getSaveClickable();</span>
<span class="fc" id="L348">        gameStage.addActor(saveClickable);</span>
<span class="fc" id="L349">        extraChefClickable = extraChefPowerup.getExtraChefClickable();</span>
<span class="fc" id="L350">        extraChefClickable.setScale(0.7f);</span>
<span class="fc" id="L351">        gameStage.addActor(extraChefClickable);</span>

        // unlock baking
<span class="fc" id="L354">        unlockBakingClickable = unlock.getUnlockBakingButton();</span>
        // pizza
        // adding the station clickables to the screen
<span class="fc" id="L357">        pantryClickable.setPosition(0, 64);</span>
<span class="fc" id="L358">        fryingClickable.setPosition(32, 64);</span>
<span class="fc" id="L359">        bakingClickable.setPosition(64, 64);</span>
<span class="fc" id="L360">        binClickable.setPosition(0, 0);</span>
<span class="fc" id="L361">        cuttingClickable.setPosition(32, 0);</span>
<span class="fc" id="L362">        servingClickable.setPosition(96, 16);</span>
<span class="fc" id="L363">        saveClickable.setPosition(170, 100);</span>
<span class="fc" id="L364">        extraChefClickable.setPosition(110, 120);</span>

        // close button for station pop ups
<span class="fc" id="L367">        XbtnClickable = createImageClickable(new Texture(&quot;Xbtn.png&quot;), 16, 16);</span>
        // function executes after clicking on the close button
        // hides any menus that pop up
<span class="fc" id="L370">        XbtnClickable.addListener(new ClickListener() {</span>
            @Override
            public void clicked(InputEvent event, float x, float y) {
<span class="nc" id="L373">                hidePantryScreen();</span>
<span class="nc" id="L374">                hideServingScreen();</span>
<span class="nc" id="L375">                cooks.get(selected).isBusy = false;</span>
<span class="nc" id="L376">            }</span>
        });

        // pantry screen frame
<span class="fc" id="L380">        pantryScreenFrameRegion = new TextureRegion(new Texture(&quot;pantryFrame.png&quot;));</span>
<span class="fc" id="L381">        pantryScreenFrame = new ImageButton(new TextureRegionDrawable(pantryScreenFrameRegion));</span>
<span class="fc" id="L382">        pantryScreenFrame.setSize(140, 92);</span>

        /*
         * Pantry screen buttons
         * The functions executes after clicking on any of the ingredient buttons on the
         * pantry screen
         * Addes the ingredient to the current cook's stack (if it's less than 5 items)
         */
        // unprepared lettuce button
<span class="fc" id="L391">        lettuceClickable = lettuce.getLettuceClickable();</span>
        // unprepared tomato button
<span class="fc" id="L393">        tomatoClickable = tomato.getTomatoClickable();</span>
        // unprepared buns button
<span class="fc" id="L395">        bunsClickable = bun.getBunClickable();</span>
        // unprepared patty button
<span class="fc" id="L397">        pattyClickable = patty.getPattyClickable();</span>
<span class="fc" id="L398">        potatoClickable = potato.getPotatoClickable();</span>
<span class="fc" id="L399">        speedClickable = speedPowerup.getSpeedClickable();</span>
<span class="fc" id="L400">        repClickable = repPowerup.getRepButton();</span>
<span class="fc" id="L401">        stationSpeedClickable = stationSpeedPowerup.getStationClickable();</span>
<span class="fc" id="L402">        extraTimeClickable = extratimePowerup.getExtraTimeClickable();</span>
<span class="fc" id="L403">        pizzaClickable = pizza.getPizzaClickable();</span>
<span class="fc" id="L404">        unlockBakingClickable = unlock.getUnlockBakingButton();</span>
<span class="fc" id="L405">        pizzaServableClickable = pizzaServe.getPizzaServeClickable();</span>
<span class="fc" id="L406">        potatoServeClickable = potatoServe.getPotatoServeClickable();</span>
<span class="fc" id="L407">        doubleMoneyClickable = doubleMoneyPowerup.getDoubleMoneyClickable();</span>
        // serving screen frame
<span class="fc" id="L409">        servingScreenFrameRegion = new TextureRegion(new Texture(&quot;servingFrame.png&quot;));</span>
<span class="fc" id="L410">        servingScreenFrame = new ImageButton(new TextureRegionDrawable(servingScreenFrameRegion));</span>
<span class="fc" id="L411">        servingScreenFrame.setSize(140, 92);</span>

        /*
         * Serving screen buttons
         * The functions executes after clicking on any of the ingredient buttons on the
         * serving screen
         * Serves the item if all the required prepared ingredients are in the current
         * cook's stack
         */
        // burger button
<span class="fc" id="L421">        burgerClickable = burger.getBurgerClickable();</span>
        // salad button
<span class="fc" id="L423">        saladClickable = saladC.getSaladClickable();</span>
<span class="fc" id="L424">        this.endless = isEndless;</span>
<span class="pc bpc" id="L425" title="1 of 2 branches missed.">        if (isLoad) {</span>
            try {
<span class="nc" id="L427">                loadJSON(Loadfile);</span>
<span class="nc" id="L428">            } catch (IOException e) {</span>
<span class="nc" id="L429">                throw new RuntimeException(e);</span>
<span class="nc" id="L430">            }</span>
        }

<span class="fc" id="L433">    }</span>

    /*
        * Gets the game time
        *
        * @return gameTime
     */
    public long getGameTime() {
<span class="fc" id="L441">        return gameTime;</span>
    }
    /*
        * Gets stations currently being used
        *
        * @return none
     */
    public void setSationSelected(int value) {
<span class="fc" id="L449">        stationSelected.set(selected, value);</span>
<span class="fc" id="L450">    }</span>

    public ArrayList&lt;Integer&gt; getStationSelected() {
<span class="fc" id="L453">        return stationSelected;</span>
    }

    /*
        * Gets current cook selected
        *
        * @return selected
     */
    public int getSelected() {
<span class="nc" id="L462">        return selected;</span>
    }

    /*
       * Gets the array of cooks
       *
       * @return cooks
     */

    /*
        * Gets the stage
        *
        * @return gameStage the stage
     */
    public Stage getGameStage() {
<span class="fc" id="L477">        return gameStage;</span>
    }

    public Array&lt;Cook&gt; getCooks() {
<span class="fc" id="L481">        return cooks;</span>
    }
    /*
        * Increment frying clicked
        *
        * @return none
     */
    public void incrementFryingClicked() {
<span class="fc" id="L489">        fryingClicked++;</span>
<span class="fc" id="L490">    }</span>
    /*
        * Used to buy a third chef
        *
        * @param chefCount the number of chefs
        *
        * @return none
     */
    public void setChef(int chefCount) {
<span class="fc" id="L499">        thirdChefUnlocked = true;</span>
<span class="fc" id="L500">        int freeStation = helpers.findFreeStation(stationSelected);</span>
<span class="fc" id="L501">        isInitialMove = true;</span>
<span class="fc" id="L502">        stationSelected.set(2, freeStation);</span>
<span class="fc" id="L503">    }</span>

    public int getCookCount() {
<span class="fc" id="L506">        return cookCount;</span>
    }

//    public int findFreeStation() {
//        ArrayList&lt;Integer&gt; listA = new ArrayList&lt;&gt;();
//        for (int i=0;i&lt;=5;i++) {
//            listA.add(i);
//        }
//        for (int i : stationSelected) {
//            for (int j = 0; j &lt; listA.size(); j++) {
//                if (listA.get(j) == i) {
//                    listA.remove(j);
//                }
//            }
//        }
//        return listA.get(0);
//    }

    /*
        * Increments the number of times baking is clicked
        *
        * @return none
     */
    public void incrementBakingClicked() {
<span class="fc" id="L530">        bakingClicked++;</span>
<span class="fc" id="L531">    }</span>

    /*
        * Gets the number of times frying is clicked
        *
        * @return fryingClicked
     */
    public int getFryingClicked() {
<span class="fc" id="L539">        return fryingClicked;</span>
    }
    /*
        * Gets the number of times baking is clicked
        *
        * @return bakingClicked
     */
    public int getBakingClicked() {
<span class="fc" id="L547">        return bakingClicked;</span>
    }
    /*
        * Gets whether baking is unlocked
        *
        * @return bakingUnlocked
     */
    public boolean bakingUnlocked() {
<span class="fc" id="L555">        return bakingUnlocked;</span>
    }
    /*
        * Unlocks baking
        *
        * @param value  whether baking is unlocked
        *
        * @return none
     */
    public void setBakingUnlocked(boolean value) {
<span class="fc" id="L565">        bakingUnlocked = value;</span>
<span class="fc" id="L566">    }</span>
    /*
        * Sets pizza to bake
        *
        * @param isBaking   whether pizza is baking
        *
        * @return none
     */
    public void setPizzaAtBaking(Boolean isBaking) {
<span class="fc" id="L575">        pizzaAtBaking = isBaking;</span>
<span class="fc" id="L576">    }</span>
    /*
        * Gets whether pizza is baking
        *
        * @return pizzaAtBaking
     */
    public boolean getPizzaAtBaking() {
<span class="fc" id="L583">        return pizzaAtBaking;</span>
    }
    /*
        * Sets the potato to bake
        *
        * @param isBaking whether potato is baking
        *
        * @return none
     */
<span class="fc" id="L592">    public void setAtPotatoBaking(Boolean isBaking) {potatoAtBaking = isBaking;}</span>
    /*
        * Gets whether potato is baking
        *
        * @return potatoAtBaking
     */
<span class="fc" id="L598">    public boolean getAtPotatoBaking() {return potatoAtBaking;}</span>
    /*
        * Sets the patty to fry
        *
        * @param isFrying whether patty is frying
        *
        * @return none
     */
    public void setPattyAtFrying(Boolean isFrying) {
<span class="fc" id="L607">        pattyAtFrying = isFrying;</span>
<span class="fc" id="L608">    }</span>

    /*
        * Gets whether patty is frying
        *
        * @return pattyAtFrying
     */
    public boolean getPattyAtFrying() {
<span class="fc" id="L616">        return pattyAtFrying;</span>
    }

    /*
        * Shows/hides the pantry screen
        *
        * @param show whether to show or hide the pantry screen
        *
        * @return none
     */
    public void setShowPantryScreen(Boolean show) {
<span class="fc" id="L627">        showPantryScreen = show;</span>
<span class="fc" id="L628">    }</span>
    /*
        * Gets whether pantry screen is shown
        *
        * @return showPantryScreen
     */
    public boolean getShowPantryScreen() {
<span class="fc" id="L635">        return showPantryScreen;</span>
    }
    /*
        * Shows/hides the serving screen
        *
        * @param value whether to show or hide the serving screen
        *
        * @return none
     */
    public void setShowServingScreen(Boolean value) {
<span class="fc" id="L645">        showServingScreen = value;</span>
<span class="fc" id="L646">    }</span>
    /*
        * Gets whether serving screen is shown
        *
        * @return showServingScreen
     */
    public boolean getShowServingScreen() {
<span class="fc" id="L653">        return showServingScreen;</span>
    }

    /*
        * Gets customers
        *
        * @return customers
     */
    public ArrayList&lt;ArrayList&lt;Customer&gt;&gt; getCustomers() {
<span class="fc" id="L662">        return customers;</span>
    }

    /*
        * Gets the number of customers
        *
        * @return customerCount
     */
    public int getCustomerCount() {
<span class="fc" id="L671">        return customerCount;</span>
    }

    /*
        * Changes the number of customers served
        *
        * @param amnt the amount to change by
        *
        * @return none
     */
    public void increaseNumServed(int amnt) {
<span class="fc" id="L682">        NumServed += amnt;</span>
<span class="fc" id="L683">    }</span>

    /*
        * Changes rep
        *
        * @param amount the amount to change rep by
        *
        * @return none
     */
    public void addRep(int amount) {
<span class="fc" id="L693">        Rep += amount;</span>
<span class="fc" id="L694">    }</span>

    /*
        * Gets the current money
        *
        * @param none
        *
        * @return money
        *
     */
    public Money getMoney() {
<span class="fc" id="L705">        return money;</span>
    }

    /*
        * Gets the current rep
        *
        * @param none
        *
        * @return Rep
        *
     */
    public int getRep() {
<span class="fc" id="L717">        return Rep;</span>
    }

    /*
        * Gets the powerups
        *
        * @param none
        *
        * @return powerups the powerups
        *
     */
    public Powerups getPowerups() {
<span class="fc" id="L729">        return powerups;</span>
    }

    /*
        * Initialises the save file if supplied
        *
        * @param obj the JSONObject to initialise from
        *
        * @return none
     */
    public void initialiseLoad(JSONObject obj) {
<span class="fc" id="L740">        Rep = obj.optInt(&quot;rep&quot;, 3);</span>
<span class="fc" id="L741">        int timeTaken = obj.optInt(&quot;timetaken&quot;, 0);</span>
<span class="fc" id="L742">        gameTime = System.currentTimeMillis() + timeTaken;</span>
        // customerCount = obj.optInt(&quot;customersLeft&quot;, defaultCustomerCountValue);
<span class="fc" id="L744">        int moneyToAdd = obj.optInt(&quot;Money&quot;, 0);</span>
<span class="fc" id="L745">        money.addMoney(moneyToAdd);</span>
<span class="fc" id="L746">        NumServed = obj.optInt(&quot;NumServed&quot;, 0);</span>
<span class="fc bfc" id="L747" title="All 2 branches covered.">        if (obj.optBoolean(&quot;bakingUnlocked&quot;, false)) {</span>
<span class="fc" id="L748">            bakingUnlocked = true;</span>
        }

<span class="pc bpc" id="L751" title="1 of 2 branches missed.">        if (obj.optBoolean(&quot;Speed&quot;, false)) {</span>
<span class="nc" id="L752">            powerups.setSpeedMultiplierFree(2);</span>
        }
<span class="pc bpc" id="L754" title="1 of 2 branches missed.">        if (obj.optBoolean(&quot;DoubleMoney&quot;, false)) {</span>
<span class="nc" id="L755">            powerups.buyDoubleMoneyFree();</span>
        }
<span class="pc bpc" id="L757" title="1 of 2 branches missed.">        if (obj.optBoolean(&quot;ExtraTime&quot;, false)) {</span>
<span class="nc" id="L758">            powerups.buyExtraTimeFree();</span>
        }
<span class="fc bfc" id="L760" title="All 2 branches covered.">        if (obj.optBoolean(&quot;ExtraChef&quot;, false)) {</span>
<span class="fc" id="L761">            thirdChefUnlocked = true;</span>
        }


<span class="fc" id="L765">    }</span>

    /*
        * Loads the save file
        *
        * @param Loadfile the file to load from
        *
        * @return none
     */
    public void loadJSON(String Loadfile) throws IOException {
<span class="nc" id="L775">        String content = new String(Files.readAllBytes(Paths.get(Loadfile)));</span>
<span class="nc" id="L776">        obj = new JSONObject(content);</span>
<span class="nc" id="L777">        initialiseLoad(obj);</span>
<span class="nc" id="L778">    }</span>

    /*
        * Creates a clickable image
        *
        * @param texture the texture to use
        * @param width the width of the image
        * @param height the height of the image
        *
        * @return clickable the clickable image
     */
    public ImageButton createImageClickable(Texture texture, float width, float height) {
<span class="fc" id="L790">        TextureRegion region = new TextureRegion(texture);</span>
<span class="fc" id="L791">        ImageButton clickable = new ImageButton(new TextureRegionDrawable(region));</span>
<span class="fc" id="L792">        clickable.setSize(width, height);</span>
<span class="fc" id="L793">        clickable.addListener(cursorHovering);</span>
<span class="fc" id="L794">        return clickable;</span>
    }

    /*
        * Renders the game
        *

        * @param delta the time since the last frame
        *
        * @return none
     */
    @Override
    public void render(float delta) {
<span class="nc" id="L807">        gameCam.update();</span>
<span class="nc" id="L808">        renderer.setView(gameCam);</span>

<span class="nc" id="L810">        ScreenUtils.clear(0, 0, 0, 0);</span>
<span class="nc" id="L811">        Gdx.gl.glClearColor(0, 0, 0, 1);</span>
<span class="nc" id="L812">        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span>
<span class="nc" id="L813">        Gdx.input.setInputProcessor(gameStage);</span>
<span class="nc" id="L814">        renderer.render();</span>

        // call functions which determine key gameplay elements
<span class="nc" id="L817">        gameStage.act();</span>

<span class="nc" id="L819">        updateProgressBars();</span>
<span class="nc" id="L820">        updateBatch();</span>
<span class="nc" id="L821">        showCookStack();</span>
<span class="nc" id="L822">        showStationScreens();</span>
<span class="nc" id="L823">        showOrders(delta);</span>
//        showRepPoints();
<span class="nc" id="L825">        helpers.showRepPoints(RepLabel, Rep, RepPoint);</span>
        try {
<span class="nc" id="L827">            customerOperations();</span>
<span class="nc" id="L828">        } catch (IOException e) {</span>
            // TODO Auto-generated catch block
<span class="nc" id="L830">            e.printStackTrace();</span>
<span class="nc" id="L831">        }</span>
        try {
<span class="nc" id="L833">            processInput();</span>
<span class="nc" id="L834">        } catch (IOException e) {</span>
            // TODO Auto-generated catch block
<span class="nc" id="L836">            e.printStackTrace();</span>
<span class="nc" id="L837">        }</span>
//        powerups.render();
<span class="nc" id="L839">        powerups.checkPowerups();</span>
<span class="nc" id="L840">        gameStage.draw();</span>

<span class="nc" id="L842">        handlePattyFrying(Gdx.graphics.getDeltaTime());</span>
<span class="nc" id="L843">        handlePizzaBaking(Gdx.graphics.getDeltaTime());</span>
<span class="nc" id="L844">        handlePotatoBaking(Gdx.graphics.getDeltaTime());</span>


<span class="nc bnc" id="L847" title="All 2 branches missed.">        for (int i = 0; i &lt; cookCount; i++) {</span>
<span class="nc bnc" id="L848" title="All 2 branches missed.">            if (!cooks.get(i).isBusy) {</span>
<span class="nc" id="L849">                cooks.get(i).move(stationSelected.get(i), cooks.get(i).CookBody, stationSelected, powerups, selected, isInitialMove);</span>

            }

        }
<span class="nc bnc" id="L854" title="All 2 branches missed.">        if (isInitialMove) {</span>
<span class="nc" id="L855">            boolean anynot = false;</span>
<span class="nc bnc" id="L856" title="All 2 branches missed.">            for (int i = 0; i&lt;cookCount;i++) {</span>
<span class="nc bnc" id="L857" title="All 4 branches missed.">                if (locations[stationSelected.get(i)][0] - cooks.get(i).CookBody.getX() &gt; 1|| locations[stationSelected.get(i)][1] - cooks.get(i).CookBody.getY() &gt; 1) {</span>
<span class="nc" id="L858">                    anynot = true;</span>
                }
            }
<span class="nc bnc" id="L861" title="All 2 branches missed.">            if (!anynot) {</span>
<span class="nc" id="L862">                isInitialMove = false;</span>
            }
        }

<span class="nc bnc" id="L866" title="All 2 branches missed.">        if (thirdChefUnlocked) {</span>
<span class="nc" id="L867">            extraChefClickable.setPosition(100000, -1);</span>
        }

<span class="nc" id="L870">        money.render();</span>

        // cooks.get(selected).doUserInput(cooks.get(selected));

<span class="nc" id="L874">    }</span>
    /*
        * Handles the frying of the patty and controls burning
        *
        * @param delta the time since the last frame
        *
        * @return none
     */
    public void handlePattyFrying(float delta) {
<span class="fc bfc" id="L883" title="All 2 branches covered.">        if (pattyAtFrying) {</span>

<span class="fc" id="L885">            pattyFryingTime += delta;</span>
<span class="fc" id="L886">            game.batch.begin();</span>
<span class="fc" id="L887">            game.batch.draw(flipBtn, 30, 80);</span>
<span class="fc" id="L888">            game.batch.end();</span>
        } else {
<span class="pc bpc" id="L890" title="1 of 2 branches missed.">            if (pattyFryingTime &gt;= 10) {</span>
<span class="nc" id="L891">                Ingredient flippedPatty = cooks.get(selected).CookStack.peek();</span>
<span class="nc" id="L892">                flippedPatty.setBurnt();</span>
<span class="nc" id="L893">                flippedPatty.updateCurrentTexture();</span>
            }
<span class="fc" id="L895">            pattyFryingTime = 0;</span>
        }
<span class="fc" id="L897">    }</span>

    /*
        * Handles the baking of the potato and controls burning
        *
        * @param delta the time since the last frame
        *
        * @return none
     */
    public void handlePotatoBaking(float delta) {
<span class="fc bfc" id="L907" title="All 2 branches covered.">            if (potatoAtBaking) {</span>

<span class="fc" id="L909">                potatoBakingTime += delta;</span>
<span class="fc" id="L910">                game.batch.begin();</span>
<span class="fc" id="L911">                game.batch.draw(flipBtn, 85, 78);</span>
<span class="fc" id="L912">                game.batch.end();</span>
            } else {
<span class="pc bpc" id="L914" title="1 of 2 branches missed.">                if (potatoBakingTime &gt;= 10) {</span>
<span class="nc" id="L915">                    Ingredient flippedPotato = cooks.get(selected).CookStack.peek();</span>
<span class="nc" id="L916">                    flippedPotato.setBurnt();</span>
<span class="nc" id="L917">                    flippedPotato.updateCurrentTexture();</span>
                }
<span class="fc" id="L919">                potatoBakingTime = 0;</span>
            }
<span class="fc" id="L921">    }</span>
    /*
        * Handles the baking of the pizza and controls burning
        *
        * @param delta the time since the last frame
        *
        * @return none
     */
    public void handlePizzaBaking(float delta) {
<span class="fc bfc" id="L930" title="All 2 branches covered.">        if (pizzaAtBaking) {</span>
<span class="fc" id="L931">            pizzaBakingTime += delta;</span>
<span class="fc" id="L932">            game.batch.begin();</span>
<span class="fc" id="L933">            game.batch.draw(flipBtn, 85, 78);</span>
<span class="fc" id="L934">            game.batch.end();</span>
        } else {
<span class="pc bpc" id="L936" title="1 of 2 branches missed.">            if (pizzaBakingTime &gt;= 10) {</span>
<span class="nc" id="L937">                Ingredient flippedPizza = cooks.get(selected).CookStack.peek();</span>
<span class="nc" id="L938">                flippedPizza.setBurnt();</span>
<span class="nc" id="L939">                flippedPizza.updateCurrentTexture();</span>
            }
        }
<span class="fc" id="L942">    }</span>

    /*
        * Controls the customers and their movement and actions
        *
        * @param none
        *
        * @throws IOException
        *
        * @return none
     */
    public void customerOperations() throws IOException {
        // Check if all customers have been served
<span class="fc" id="L955">        boolean allComplete = false;</span>
<span class="fc bfc" id="L956" title="All 2 branches covered.">        for (Customer c : customers.get(customerCount)) {</span>
<span class="fc bfc" id="L957" title="All 2 branches covered.">            if (!c.selfComplete) {</span>
<span class="fc" id="L958">                allComplete = false;</span>
<span class="fc" id="L959">                break;</span>
            } else {
<span class="fc" id="L961">                allComplete = true;</span>
            }
<span class="fc" id="L963">        }</span>
<span class="fc" id="L964">        System.out.println(allComplete);</span>
        // move the customers to the counter
<span class="fc bfc" id="L966" title="All 2 branches covered.">        for (int i = 0; i &lt; customers.get(customerCount).size(); i++) {</span>
<span class="pc bpc" id="L967" title="1 of 2 branches missed.">            if (!customers.get(customerCount).get(i).atCounter) {</span>
<span class="fc" id="L968">                customers.get(customerCount).get(i).move();</span>
<span class="nc bnc" id="L969" title="All 2 branches missed.">            } else if (allComplete) {</span>
                // make the customer leave
<span class="nc" id="L971">                customers.get(customerCount).get(i).move();</span>

<span class="nc bnc" id="L973" title="All 2 branches missed.">                if (customers.get(customerCount).get(i).body.getX() &gt; 148) {</span>
<span class="nc" id="L974">                    customers.get(customerCount).get(i).body.remove();</span>
<span class="nc bnc" id="L975" title="All 2 branches missed.">                    if (!endless) {</span>
                        // check if the game is in endless mode or not
<span class="nc bnc" id="L977" title="All 2 branches missed.">                        if (NumServed &lt; customerNumber) {</span>
                            // spawn new customer

<span class="nc" id="L980">                            ArrayList&lt;Customer&gt; tmp = new ArrayList&lt;Customer&gt;();</span>
<span class="nc" id="L981">                            int tmpI = helpers.CustomersToServe(customerCount);</span>
<span class="nc bnc" id="L982" title="All 2 branches missed.">                            for (int j = 0; j &lt; tmpI; j++) {</span>
<span class="nc" id="L983">                                tmp.add(new Customer(new Actor(), bakingUnlocked));</span>
                            }
<span class="nc bnc" id="L985" title="All 2 branches missed.">                            if (powerups.hasExtraTime()) {</span>
<span class="nc bnc" id="L986" title="All 2 branches missed.">                                for (Customer c : tmp) {</span>
<span class="nc" id="L987">                                    c.customerOrder.setOrderTime(c.customerOrder.getOrderTime() + 10);</span>
<span class="nc" id="L988">                                }</span>
                            } else {
                            }

<span class="nc" id="L992">                            customers.add(tmp);</span>
<span class="nc" id="L993">                            customerCount += 1;</span>
<span class="nc" id="L994">                            increaseNumServed(tmpI);</span>
<span class="nc" id="L995">                        } else {</span>
                            // end game by taking the time at the game end and going to the time screen

<span class="nc" id="L998">                            long timeTaken = System.currentTimeMillis() - gameTime;</span>
<span class="nc" id="L999">                            alienJazz.stop();</span>
<span class="nc bnc" id="L1000" title="All 2 branches missed.">                            if (endless) {</span>
<span class="nc" id="L1001">                                int tosub = 0;</span>
<span class="nc bnc" id="L1002" title="All 2 branches missed.">                                for (Customer c : customers.get(customerCount)) {</span>
<span class="nc bnc" id="L1003" title="All 2 branches missed.">                                    if (!c.selfComplete) {</span>
<span class="nc" id="L1004">                                        tosub += 1;</span>
                                    }
<span class="nc" id="L1006">                                }</span>
<span class="nc" id="L1007">                                game.setScreen(new EndGameScreen(game, timeTaken, 0, true, NumServed- tosub));</span>
<span class="nc" id="L1008">                            } else {</span>
<span class="nc" id="L1009">                                game.setScreen(new EndGameScreen(game, timeTaken, Rep, false, 0));</span>
                            }

<span class="nc" id="L1012">                        }</span>
                    } else {
                        // TODO endless mode
<span class="nc" id="L1015">                        ArrayList&lt;Customer&gt; tmp = new ArrayList&lt;Customer&gt;();</span>
<span class="nc" id="L1016">                        int tmpI = helpers.CustomersToServe(customerCount);</span>

<span class="nc bnc" id="L1018" title="All 2 branches missed.">                        for (int j = 0; j &lt; tmpI; j++) {</span>
<span class="nc" id="L1019">                            tmp.add(new Customer(new Actor(), bakingUnlocked));</span>
                        }
<span class="nc" id="L1021">                        customers.add(tmp);</span>
<span class="nc" id="L1022">                        customerCount += 1;</span>
<span class="nc" id="L1023">                        increaseNumServed(tmpI);</span>
                    }
                }
            }
        }

<span class="fc" id="L1029">    }</span>

    /*
        * Spawn the cooks and add them to the stage
        *
        * @param none
        *
        * @return none
     */
    private void spawnCooks() {
<span class="fc bfc" id="L1039" title="All 2 branches covered.">        for (int i = 0; i &lt; cookCount; i++) {</span>
<span class="fc" id="L1040">            Cook cook = new Cook(new Actor());</span>
<span class="fc" id="L1041">            cook.CookBody.setWidth(16);</span>
<span class="fc" id="L1042">            cook.CookBody.setHeight(23);</span>
            // scale information
<span class="fc" id="L1044">            cook.CookBody.setScaleX(game.GAME_WIDTH / 16f);</span>
<span class="fc" id="L1045">            cook.CookBody.setScaleY(game.GAME_HEIGHT / 23f);</span>
            // cooks are stored in an array to make it easier to keep track of all things
            // relating to them
            // I love arrays so much
<span class="fc" id="L1049">            cooks.add(cook);</span>
<span class="fc" id="L1050">            gameStage.addActor(cook.CookBody);</span>
<span class="fc bfc" id="L1051" title="All 2 branches covered.">            if (i == 2) {</span>
<span class="fc" id="L1052">                stationSelected.add(6);</span>
            } else {
<span class="fc" id="L1054">                stationSelected.add(i);</span>
            }
        }
<span class="fc" id="L1057">    }</span>


    /*
        * Handles the input from the user
        *
        * @param none
        *
        * @throws IOException
        *
        * @return none
     */
    public void processInput() throws IOException {
        // number keys are used to select which cook is being controlled currently
<span class="nc bnc" id="L1071" title="All 2 branches missed.">        if (Gdx.input.isKeyPressed(Input.Keys.NUM_1)) {</span>
<span class="nc" id="L1072">            selected = 0;</span>
<span class="nc bnc" id="L1073" title="All 2 branches missed.">        } else if (Gdx.input.isKeyPressed(Input.Keys.NUM_2)) {</span>
<span class="nc" id="L1074">            selected = 1;</span>
        }

        // TODO add statements for adding more cooks here
<span class="nc bnc" id="L1078" title="All 6 branches missed.">        if (cookCount &gt; 2 &amp;&amp; Gdx.input.isKeyPressed(Input.Keys.NUM_3) &amp;&amp; thirdChefUnlocked) {</span>
<span class="nc" id="L1079">            selected = 2;</span>
        }
<span class="nc bnc" id="L1081" title="All 2 branches missed.">        for (int i = 0; i &lt; cooks.size; i++) {</span>
<span class="nc bnc" id="L1082" title="All 2 branches missed.">            if (cooks.get(i).CookBody.isTouchFocusTarget()) {</span>
<span class="nc" id="L1083">                selected = i;</span>
            }
        }


<span class="nc bnc" id="L1088" title="All 2 branches missed.">        if (Gdx.input.isKeyPressed(Input.Keys.ESCAPE)) {</span>
            // return to main menu
<span class="nc" id="L1090">            game.setScreen(new MainMenuScreen(game));</span>
        }


<span class="nc" id="L1094">    }</span>

    /*
        * Updates the batch with the sprites for the cooks
        *
        * @param none
        *
        * @return none
     */
    public void updateBatch() {
        // this section assigns each cook a sprite from the list idles
        // you could potentially update this to allow for animations for the cooks when
        // they move
<span class="fc" id="L1107">        game.batch.begin();</span>
<span class="fc" id="L1108">        int index = 0;</span>
<span class="fc bfc" id="L1109" title="All 2 branches covered.">        for (Cook cook : cooks) {</span>
<span class="fc" id="L1110">            game.batch.draw(idles.get(index), cook.CookBody.getX(), cook.CookBody.getY());</span>
<span class="fc" id="L1111">            index++;</span>
<span class="fc" id="L1112">        }</span>
<span class="fc" id="L1113">        game.batch.draw(plateTex, 164, 25);</span>
<span class="fc" id="L1114">        game.batch.draw(cookStackTitle, 164, 120);</span>
<span class="fc" id="L1115">        game.batch.draw(idles.get(selected), 168, 1);</span>
<span class="fc bfc" id="L1116" title="All 2 branches covered.">        for (int i = 0; i &lt; customers.get(customerCount).size(); i++) {</span>
<span class="fc" id="L1117">            game.batch.draw(custSkins.getSprite(customers.get(customerCount).get(i).name),</span>
<span class="fc" id="L1118">                    customers.get(customerCount).get(i).body.getX(), customers.get(customerCount).get(i).body.getY());</span>
        }
<span class="fc" id="L1120">        game.batch.end();</span>
<span class="fc" id="L1121">    }</span>

    /*
        * Shows the orders at the top of the screen
        *
        * @param dt the time since the last frame
        *
        * @return none
     */
    public void showOrders(float dt) {
        // displays the orders at the top of the screen
<span class="fc" id="L1132">        int x = 1;</span>
<span class="fc" id="L1133">        int y = 112;</span>

<span class="fc" id="L1135">        timeCount += dt;</span>
<span class="fc" id="L1136">        boolean shouldUpdateTimers = false; // Add a new flag to indicate whether timers should be updated</span>

        // Check if one second has passed
<span class="pc bpc" id="L1139" title="1 of 2 branches missed.">        if (timeCount &gt;= 1) {</span>
<span class="nc" id="L1140">            shouldUpdateTimers = true;</span>
<span class="nc" id="L1141">            timeCount = 0; // Reset timeCount outside the customer loop</span>
        }

<span class="fc bfc" id="L1144" title="All 2 branches covered.">        for (ArrayList&lt;Customer&gt; customerArr : customers) {</span>
<span class="fc bfc" id="L1145" title="All 2 branches covered.">            for (Customer customer : customerArr) {</span>
<span class="pc bpc" id="L1146" title="3 of 4 branches missed.">                if ((customer.atCounter) &amp;&amp; (!customer.selfComplete)) {</span>
                    // Update order timer only if shouldUpdateTimers is true
<span class="nc bnc" id="L1148" title="All 2 branches missed.">                    if (shouldUpdateTimers) {</span>
<span class="nc bnc" id="L1149" title="All 2 branches missed.">                        if (customer.customerOrder.getOrderTime() &gt;= 0) {</span>
<span class="nc" id="L1150">                            customer.customerOrder.orderTime--;</span>
                        }
                    }

<span class="nc bnc" id="L1154" title="All 6 branches missed.">                    if (customer.customerOrder.getOrderTime() == 0 &amp;&amp; !customer.selfComplete</span>
                            &amp;&amp; !customer.orderExpired) {
                        // Uncomment line below if you want the customer to leave after the order timer
                        // is gone
                        // customer.orderComplete = true;
<span class="nc" id="L1159">                        customer.orderExpired = true;</span>
<span class="nc" id="L1160">                        Rep--;</span>
<span class="nc bnc" id="L1161" title="All 2 branches missed.">                        if (Rep &lt;= 0) {</span>
<span class="nc" id="L1162">                            long timeTaken = System.currentTimeMillis() - gameTime;</span>
                            try {
<span class="nc" id="L1164">                                int tosub = 0;</span>
<span class="nc bnc" id="L1165" title="All 2 branches missed.">                                for (Customer c : customers.get(customerCount)) {</span>
<span class="nc bnc" id="L1166" title="All 2 branches missed.">                                    if (!c.selfComplete) {</span>
<span class="nc" id="L1167">                                        tosub += 1;</span>
                                    }
<span class="nc" id="L1169">                                }</span>
<span class="nc" id="L1170">                                game.setScreen(new EndGameScreen(game, timeTaken, 0, true, NumServed - tosub));</span>
<span class="nc" id="L1171">                            } catch (IOException e) {</span>
                                // TODO Auto-generated catch block
<span class="nc" id="L1173">                                e.printStackTrace();</span>
<span class="nc" id="L1174">                            }</span>
                        }
                    }

<span class="nc" id="L1178">                    game.batch.begin();</span>
<span class="nc bnc" id="L1179" title="All 2 branches missed.">                    if (!customer.selfComplete) {</span>
<span class="nc" id="L1180">                        game.batch.draw(customer.customerOrder.getOrderTexture(), x, y);</span>
<span class="nc" id="L1181">                        game.batch.draw(customer.customerOrder.getRecipe().getSpeechBubbleTexture(),</span>
<span class="nc" id="L1182">                                customer.body.getX() - 10, customer.body.getY() + 17);</span>
<span class="nc bnc" id="L1183" title="All 2 branches missed.">                        if (customer.customerOrder.getOrderTime() &gt; -1) {</span>
<span class="nc" id="L1184">                            font.draw(game.batch, Integer.toString(customer.customerOrder.getOrderTime()), x + 30,</span>
                                    y + 10);
                        } else {
<span class="nc" id="L1187">                            font.draw(game.batch, &quot;0&quot;, x + 30, y + 10);</span>
                        }
                    }
                    // order timer sets to 0 when it reaches -1

<span class="nc" id="L1192">                    game.batch.end();</span>
                    // increase x value if there is more than one current order
<span class="nc" id="L1194">                    x += 41;</span>
                }
<span class="fc" id="L1196">            }</span>
<span class="fc" id="L1197">        }</span>
<span class="fc" id="L1198">    }</span>
    /*
        * Shows the selected cook's stack of ingredients
        *
        * @param none
        *
        * @return none
     */
    public void showCookStack() {
        // display the stack of ingredients being held by the current cook
<span class="fc" id="L1208">        float x = 164;</span>
<span class="fc" id="L1209">        float y = 32;</span>
<span class="fc" id="L1210">        game.batch.begin();</span>
<span class="pc bpc" id="L1211" title="1 of 2 branches missed.">        for (Ingredient ingredient : cooks.get(selected).CookStack) {</span>
<span class="nc" id="L1212">            game.batch.draw(ingredient.getCurrentTexture(), x, y);</span>
<span class="nc" id="L1213">            y += 18;</span>
<span class="nc" id="L1214">        }</span>
<span class="fc" id="L1215">        game.batch.end();</span>
<span class="fc" id="L1216">    }</span>

    /*
        * Shows the station screens
        *
        * @param none
        *
        * @return none
     */
    private void showStationScreens() {
<span class="nc bnc" id="L1226" title="All 2 branches missed.">        for (Cook cook : cooks) {</span>
<span class="nc bnc" id="L1227" title="All 4 branches missed.">            if ((Math.abs(cook.CookBody.getY() - 64f) &lt; 2) &amp;&amp; (Math.abs(cook.CookBody.getX() - 0f) &lt; 2)) {</span>
<span class="nc" id="L1228">                showPantryScreen();</span>
            }
<span class="nc bnc" id="L1230" title="All 4 branches missed.">            if ((Math.abs(cook.CookBody.getY() - 48f) &lt; 2) &amp;&amp; (Math.abs(cook.CookBody.getX() - 80f) &lt; 2)) {</span>
<span class="nc" id="L1231">                showServingScreen();</span>
            }
<span class="nc" id="L1233">        }</span>
<span class="nc" id="L1234">    }</span>

    /*
        * Shows the serving screen
        *
        * @param none
        *
        * @return none
     */
    public void showServingScreen() {
<span class="pc bpc" id="L1244" title="1 of 2 branches missed.">        if (showServingScreen) {</span>
<span class="fc" id="L1245">            gameStage.addActor(servingScreenFrame);</span>
<span class="fc" id="L1246">            gameStage.addActor(XbtnClickable);</span>
<span class="fc" id="L1247">            XbtnClickable.toFront();</span>
<span class="fc" id="L1248">            gameStage.addActor(burgerClickable);</span>
<span class="fc" id="L1249">            gameStage.addActor(saladClickable);</span>
<span class="fc" id="L1250">            gameStage.addActor(pizzaServableClickable);</span>
<span class="fc" id="L1251">            gameStage.addActor(potatoServeClickable);</span>
<span class="fc" id="L1252">            servingScreenFrame.setPosition(10, 10);</span>
<span class="fc" id="L1253">            XbtnClickable.setPosition(7, 88);</span>
<span class="fc" id="L1254">            burgerClickable.setPosition(25, 66);</span>
<span class="fc" id="L1255">            saladClickable.setPosition(53, 66);</span>
<span class="fc" id="L1256">            pizzaServableClickable.setPosition(77, 66);</span>
<span class="fc" id="L1257">            potatoServeClickable.setPosition(100, 66);</span>
<span class="fc" id="L1258">            pizzaServableClickable.toFront();</span>
<span class="fc" id="L1259">            showServingScreen = false;</span>
        }
<span class="fc" id="L1261">    }</span>

    /*
        * Shows the pantry screen
        *
        * @param none
        *
        * @return none
     */
    public void showPantryScreen() {
<span class="pc bpc" id="L1271" title="1 of 2 branches missed.">        if (showPantryScreen) {</span>
<span class="fc" id="L1272">            gameStage.addActor(pantryScreenFrame);</span>
<span class="fc" id="L1273">            gameStage.addActor(XbtnClickable);</span>
<span class="fc" id="L1274">            XbtnClickable.toFront();</span>
<span class="fc" id="L1275">            gameStage.addActor(lettuceClickable);</span>
<span class="fc" id="L1276">            gameStage.addActor(tomatoClickable);</span>
<span class="fc" id="L1277">            gameStage.addActor(bunsClickable);</span>
<span class="fc" id="L1278">            gameStage.addActor(pattyClickable);</span>
<span class="fc" id="L1279">            gameStage.addActor(speedClickable);</span>
<span class="fc" id="L1280">            gameStage.addActor(repClickable);</span>
<span class="fc" id="L1281">            gameStage.addActor(stationSpeedClickable);</span>
<span class="fc" id="L1282">            gameStage.addActor(extraTimeClickable);</span>
<span class="fc" id="L1283">            gameStage.addActor(pizzaClickable);</span>
<span class="fc" id="L1284">            gameStage.addActor(unlockBakingClickable);</span>
<span class="fc" id="L1285">            gameStage.addActor(potatoClickable);</span>
//            gameStage.addActor(cheeseClickable);
<span class="fc" id="L1287">            gameStage.addActor(doubleMoneyClickable);</span>
<span class="fc" id="L1288">            pantryScreenFrame.setPosition(10, 10);</span>
<span class="fc" id="L1289">            XbtnClickable.setPosition(7, 88);</span>
<span class="fc" id="L1290">            lettuceClickable.setPosition(25, 66);</span>
<span class="fc" id="L1291">            tomatoClickable.setPosition(53, 66);</span>
<span class="fc" id="L1292">            bunsClickable.setPosition(81, 66);</span>
<span class="fc" id="L1293">            pattyClickable.setPosition(110, 72);</span>
<span class="fc" id="L1294">            speedClickable.setPosition(25, 40);</span>
<span class="fc" id="L1295">            repClickable.setPosition(53, 40);</span>
<span class="fc" id="L1296">            stationSpeedClickable.setPosition(75, 40);</span>
<span class="fc" id="L1297">            extraTimeClickable.setPosition(110, 40);</span>
<span class="fc" id="L1298">            pizzaClickable.setPosition(25, 17);</span>
<span class="fc" id="L1299">            potatoClickable.setPosition(81, 17);</span>
//            cheeseClickable.setPosition(110, 17);
<span class="fc" id="L1301">            doubleMoneyClickable.setPosition(110, 17);</span>
<span class="pc bpc" id="L1302" title="1 of 2 branches missed.">            if (bakingUnlocked) {</span>
<span class="nc" id="L1303">                unlockBakingClickable.setPosition(10000, -1);</span>
            } else {
<span class="fc" id="L1305">                unlockBakingClickable.setPosition(53, 17);</span>
            }

<span class="fc" id="L1308">            showPantryScreen = false;</span>
        }
<span class="fc" id="L1310">    }</span>
    /*
        * Hides the pantry screen
        *
        * @param none
        *
        * @return none
     */
    public void hidePantryScreen() {
        // moves pantry screen offscreen
<span class="fc" id="L1320">        pantryScreenFrame.setPosition(10000, -1);</span>
<span class="fc" id="L1321">        XbtnClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1322">        lettuceClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1323">        tomatoClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1324">        bunsClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1325">        pattyClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1326">        speedClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1327">        repClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1328">        stationSpeedClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1329">        extraTimeClickable.setPosition(100000, -1);</span>
<span class="fc" id="L1330">        pizzaClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1331">        unlockBakingClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1332">        potatoClickable.setPosition(10000, -1);</span>
//        cheeseClickable.setPosition(10000, -1);
<span class="fc" id="L1334">        doubleMoneyClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1335">    }</span>
    /*
        * Gets the clickable for the potato
        *
        * @param none
        *
        * @return potatoClickable - the clickable for the potato
     */
    public ImageButton getPotatoClickable() {
<span class="fc" id="L1344">        return potatoClickable;</span>
    }
    /*
        * Hides the serving screen
        *
        * @param none
        *
        * @return none
     */
    public void hideServingScreen() {
        // moves serving screen offscreen
<span class="fc" id="L1355">        servingScreenFrame.setPosition(10000, -1);</span>
<span class="fc" id="L1356">        XbtnClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1357">        burgerClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1358">        saladClickable.setPosition(10000, -1);</span>
<span class="fc" id="L1359">        pizzaServableClickable.setPosition(100000,-1);</span>
<span class="fc" id="L1360">        potatoServeClickable.setPosition(100000, -1);</span>
<span class="fc" id="L1361">    }</span>
    /*
        * Gets the clickable for the pizza powerup
        *
        * @param none
        *
        * @return pizzaServableClickable - the clickable for the pizza powerup
     */
    public ImageButton getPizzaServableClickable() {
<span class="fc" id="L1370">        return pizzaServableClickable;</span>
    }

    /*
        * Creates a progress bar for the selected cook
        *
        * @param x - x position of the progress bar
        *
        * @param y - y position of the progress bar
        *
        * @param selectedCook - the cook that the progress bar is for
        *
        * @return none
     */
    public void createProgressBar(float x, float y, Cook selectedCook) {
<span class="fc" id="L1385">        ProgressBarStyle style = new ProgressBarStyle();</span>
<span class="fc" id="L1386">        style.background = helpers.getColoredDrawable(20, 5, Color.GREEN);</span>
<span class="fc" id="L1387">        style.knob = helpers.getColoredDrawable(0, 5, Color.WHITE);</span>
<span class="fc" id="L1388">        style.knobAfter = helpers.getColoredDrawable(20, 5, Color.WHITE);</span>
<span class="fc" id="L1389">        float stepSize = powerups.getStationSpeed() * 0.05f;</span>
<span class="fc" id="L1390">        ProgressBar bar = new ProgressBar(0, 7, stepSize, false, style);</span>
<span class="fc" id="L1391">        bar.setWidth(30);</span>
<span class="fc" id="L1392">        bar.setHeight(5);</span>
<span class="fc" id="L1393">        bar.setValue(15f);</span>
<span class="fc" id="L1394">        bar.setX(x);</span>
<span class="fc" id="L1395">        bar.setY(y);</span>
<span class="fc" id="L1396">        gameStage.addActor(bar);</span>
<span class="fc" id="L1397">        bars.put(bar, selectedCook);</span>
<span class="fc" id="L1398">    }</span>

    public HashMap&lt;ProgressBar, Cook&gt; getBars() {
<span class="fc" id="L1401">        return bars;</span>
    }

    /*
        * Updates the progress bars
        *
        * @param none
        *
        * @return none
     */
    private void updateProgressBars() {
<span class="nc bnc" id="L1412" title="All 2 branches missed.">        if (!bars.isEmpty()) {</span>
<span class="nc bnc" id="L1413" title="All 2 branches missed.">            for (ProgressBar bar : bars.keySet()) {</span>
<span class="nc" id="L1414">                bar.setValue(bar.getValue() - bar.getStepSize());</span>
<span class="nc bnc" id="L1415" title="All 2 branches missed.">                if (bar.getValue() == 0) {</span>
<span class="nc" id="L1416">                    gameStage.getActors().removeValue(bar, false);</span>
                    // unbusy the cook
<span class="nc" id="L1418">                    bars.get(bar).isBusy = false;</span>
<span class="nc" id="L1419">                    bars.remove(bar);</span>
                }
<span class="nc" id="L1421">            }</span>
        }
<span class="nc" id="L1423">    }</span>

    /*
        * Add a multiplier to the money
        *
        * @param none
        *
        * @return none
     */
    public void incMoneyMult() {
<span class="fc" id="L1433">        money.addMultiplier();</span>
<span class="fc" id="L1434">    }</span>

    /*
        * Controls window resizing
        *
        * @param width - width of the window
        *
        * @param height - height of the window
        *
        * @return none
     */
    @Override
    public void resize(int width, int height) {
<span class="nc" id="L1447">        view.update(width, height);</span>
<span class="nc" id="L1448">    }</span>
    /*
        * Renders the game
        *
        * @param none
        *
        * @return none
     */
    @Override
    public void show() {
<span class="nc" id="L1458">    }</span>
    /*
        * Pauses the game
        *
        * @param none
        *
        * @return none
     */
    @Override
    public void pause() {
<span class="nc" id="L1468">    }</span>

    /*
        * Resumes the game
        *
        * @param none
        *
        * @return none
     */
    @Override
    public void resume() {
<span class="nc" id="L1479">    }</span>
    /*
        * Hides the game
        *
        * @param none
        *
        * @return none
     */
    @Override
    public void hide() {
<span class="nc" id="L1489">    }</span>
    /*
        * Disposes of the game
        *
        * @param none
        *
        * @return none
     */
    @Override
    public void dispose() {
<span class="nc" id="L1499">        game.batch.dispose();</span>
<span class="nc" id="L1500">        gameStage.dispose();</span>
<span class="nc" id="L1501">        alienJazz.dispose();</span>
<span class="nc" id="L1502">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>